\documentclass[a4paper,11pt,oneside, titlepage]{article}
\usepackage[a4paper]{geometry} 
\geometry{a4paper,left=20mm, right=25mm, top=20mm, bottom=30mm} 
\usepackage[ngerman]{babel}
\usepackage{hyperref}
\usepackage[toc]{glossaries}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage{color}
\usepackage{dirtree}

\pagestyle{fancy}
\makeglossaries
\include{glossar}

\lhead{\today}
\rhead{Verantwortlicher: Elena Heier }
\chead{Gruppe: na17b}
\title{Entwurfsbeschreibung\\Nachrichtenkommunikation für das THW}
\author{na17b}
\date{}

\begin{document}
\maketitle

\pagenumbering{gobble}

\tableofcontents


\newpage

\pagenumbering{arabic}

\section{Allgemeines}
Die Anwendung soll den gegebenen Nachrichtenfluss in einer Notfallzentrale des THW nachbilden.
\section{Produktübersicht}
Die Anwendung führt zunächst auf eine Landing Page,die nach Einsatz, Rolle, Name und Zeichen des Users erfragt. Durch einen Klick auf Speichern gelangt man in die eigentliche UI. Im oberen Bereich befindet sich eine Kopfleiste, die einen Platzhalter für ein Logo, "Nachrichtenkom. für das THW", den Einsatznamen, Handzeichen, Rollenzeichen und -bezeichnung anzeigt. Über den Komplex Rollenzeichen und -bezeichnung besteht die Möglichkeit auf die Option des Nutzerwechsels zugreifen zu können, die der Lading Page entspricht. Am linken Bildrand befindet sich ein Menü, welches den Wechsel zwischen Übersicht, Erstellung eines Formulars,sowie einem Entwurf ermöglicht. Die Übersichtsseite vermittelt einen schnellen Überblick über alle hinterlegten Vordrucke, eingeschränkt auf Status, Technische Betriebsbuchnummer, Verfasser, Sichter, Datum, Uhrzeit, Empfänger und eine gekürzte Version des Inhalts. In der ersten Spalte befindet sich ein Button, über den der Vordruck zur genaueren Ansicht ausgewählt werden kann. Über der Formularübersicht befindet sich eine Leiste Filter, die durch Klick ausgeklappt werden kann. Dort können Filter so gewählt werden, dass jedes beliebige Formular einsehbar ist. Die Formularmaske bildet den Vierfachvordruck realitätsnah nach. Je nach Status in dem sich die Nachricht befindet wird entweder ein blauer, grüner, roter oder gelber Rand angezeigt. Die Felder, die nicht zum ausfüllen vorhergesehen sind, sind ausgegraut, trotzdem jedoch beschreibbar. Ebenfalls vom Status der Nachricht sind die Buttons am rechten Rand. Stets ist ein Button zum leeren des Formulars existieren, wobei nur eigene Eingaben gelöscht werden. Es besteht die Möglichkeit einen Entwurf zuspeichern, wenn man die Formularseite ohne weiterschicken verlassen will. Es findet derzeit auch noch keine Überprüfung der Daten hinsichtlich Konsistenz und Vollständigkeit statt. 

\section{Grundsätzliche Struktur}
Der Quelltext der Anwendung ist serviceorientiert aufgebaut. Hierzu werden Container verwendet welche die jeweiligen Services kapseln. Zwingende Voraussetzung in der Entwicklungsumgebung ist: 
\begin{itemize}
	\item Docker
	\begin{itemize}
		\item Bevor die Anwendung ausgeführt werden kann müssen auf dem ausführenden Computer (Host) die folgenden Programme installiert sein:
		\begin{itemize}
			\item \href{https://www.docker.com/get-docker}{docker}
			\item \href{https://docs.docker.com/compose/}{docker-compose} 
		\end{itemize}
		\item Die Anwendung ist auf zwei Docker-Container verteilt:
		\begin{itemize}
			\item Server-
			Container der das Frontend und Controller-Logik implementiert
			\item Daten-Container der den SPARQL-Endpoint implementiert
		\end{itemize}
		
	\end{itemize}	
\end{itemize}
\section{Struktur- und Entwurfsprinzipien einzelner Pakete}

  \subsection*{Frontend}
Das Frontend ist in \gls{Javascript} geschrieben und verwendet das \gls{Vue.js}-Framework. Als Erweiterungen kommen \gls{Vuex}, sowie \gls{vue-router} zum Einsatz. Die Verwaltung des Quelltextes sowie das kompilieren geschieht via \gls{webpack}. Zur Vereinfachung wird auf die Bibliothek von \gls{Element-UI} zurückgegriffen. Der Quelltext des Frontends befindet sich im Ordner \verb+src/frontend+. In diesem Ordner befinden sich neben einem weiteren Ordner \verb+src+ die von \gls{webpack} benötigten Dateien und Ordner; diese werden im Folgenden nicht weiter beschrieben und sind weitgehend Standard. Der Ordner \verb+src+ unterteilt sich weiter in folgende Struktur:

  \newpage

    \dirtree{%
      .1 ./src/frontend/src/.
        .2 api/.
        .2 assets/.
        .2 components/.
        .2 router/.
        .2 sparql\_help/.
        .2 store/.
          .3 actions.js.
          .3 getters.js.
          .3 index.js.
          .3 mutations.js.
          .3 state.js.
        .2 test-examples/.
        .2 App.vue.
        .2 main.js.
        .2 status.config.js.
    }

    \begin{itemize}
      \item \verb+api+ Quistore-Adapter
      \item \verb+assets+ Mediendateien (aktuell nur das THW-Logo)
      \item \verb+components+ Vue-Komponenten
      \item \verb+router+ Konfiguration von vue-router
      \item \verb+sparql_help+ SPARQL Umwandler
      \item \verb+store+ Konfiguration von Vuex
        \begin{itemize}
          \item \verb+actions.js+ formuliert einen POST Request an Quitstore
          \item \verb+getters+ stellt Funktionen zum Abrufen der Variablen bereit
          \item \verb+index.js+ fügt die obigen Dateien zusammen zu einem globalen Store
          \item \verb+mutations+ enthält Funktionen zum Bearbeiten des Zustandes
          \item \verb+state.js+ deklariert globale Zustandsvariablen
        \end{itemize}
      \item \verb+test-examples+ Beispieltests
      \item \verb+App.vue+ Wrapper-Komponente für das Frontend
      \item \verb+main.js+ Einstiegspunkt für das Programm, enthält alle Importe
      \item \verb+status.config.js+ regelt das Formularverhalten bezüglich der jeweiligen Status
    \end{itemize}

\begin{minipage}{16cm}
\dirtree{%
	.1 Frontend - Arbeitsverzeichnis von Webpack.
	.2 dist - Kompilierte und minimierte Webapp.
	.2 restliche - Konfiguration des Webpack oder node-module, wird in der Regel nicht angefasst.
}	
\end{minipage}

  \newpage

\section{Datenmodell}
Als Datenmodell wird \gls{RDF} verwendet. Die Eingaben aus der UI werden über eine \gls{SPARQL}-Schnittstelle im \gls{Quitstore} in Tripel-Form gespeichert.  Der Quitstore wird über \verb+Projekt/quitstore.sh+ lokal gestartet. Jedem Dokument wird eine ID, bestehend aus einer sechsstelligen Zufallszahl, zur Identifizierung zugeordnet. Der Quitstore stellt die Daten auf Anfrage als \gls{JSON}-Response zur Verfügung. \\ Bei Aufrufen der Übersichtsseite werden alle für die Übersicht wichtigen Daten aus dem QuitStore über eine SPARQL Select Query ausgelesen und angezeigt. Wird ein Dokument geöffnet, werden, ebenfalls über eine Select Query, alle für dieses Formular gespeicherten Informationen ausgelesen um angezeigt werden zu können.

\newpage
\printglossaries
\end{document}
